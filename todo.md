# 駐車場入出庫システム TODO

## データベース・バックエンド
- [x] 駐車スペーステーブル（10台分）の作成
- [x] 入庫記録テーブルの作成
- [x] 決済履歴テーブルの作成
- [x] 駐車スペース一覧取得API
- [x] 入庫登録API
- [x] 出庫・料金計算API
- [x] 決済処理API（デモ）
- [x] 管理者用：入庫状況一覧API
- [x] 管理者用：決済履歴一覧API

## ユーザー向け画面
- [x] QRコードスキャン画面（カメラまたは手動入力）
- [x] 入庫登録画面
- [x] 出庫・料金確認画面
- [x] デモ決済画面（PayPay/クレジットカード選択）
- [x] 決済完了画面

## 管理者向け画面
- [x] 管理者ダッシュボードレイアウト
- [x] 入庫状況一覧表示
- [x] 決済履歴一覧表示

## QRコード・その他
- [x] 各スペース用QRコード生成機能
- [x] QRコード印刷用ページ
- [x] スカンジナビアンミニマルデザイン適用

## テスト
- [x] バックエンドAPIのVitestテスト

## Stripe Connect連携
- [x] Stripe機能の追加（webdev_add_feature）
- [x] Stripe Connect OAuth認証フロー実装
- [x] 管理者設定画面にStripe接続ボタン追加
- [x] Stripe接続状態の表示（接続済み/未接続）
- [x] 決済処理をStripe実決済に切り替え
- [x] デモ決済モードとの切り替え機能
- [x] Stripe連携のテスト

## Square決済連携
- [x] データベーススキーマにSquare関連フィールド追加
- [x] Square APIヘルパー作成
- [x] Square OAuth認証フロー実装
- [x] 管理者設定画面にSquare接続UI追加
- [x] Square Checkout Session作成API
- [x] Stripe/Square排他選択ロジック

## PayPay API連携
- [x] データベーススキーマにPayPay関連フィールド追加
- [x] PayPay APIヘルパー作成
- [x] 管理者設定画面にPayPay API設定UI追加
- [x] PayPay QRコード決済API実装
- [x] 決済画面にPayPay実決済オプション追加

## 決済設定UI
- [x] クレジットカード決済セクション（Stripe/Square排他選択）
- [x] PayPay決済セクション（独立設定）
- [x] 接続状態の表示
- [x] 決済プロバイダーテスト作成・実行

## バグ修正
- [x] Stripe接続ボタンが画面遷移しない問題を修正
- [x] Square接続ボタンが画面遷移しない問題を修正
- [x] Stripe Connect → 直接決済モードへの変更
- [x] Square APIキー設定方式への変更

## 決済サービスAPIキー直接入力方式
- [x] Stripe APIキー入力フォーム（Secret Key, Publishable Key）
- [x] Square Access Token入力フォーム
- [x] 保存時の接続テスト機能
- [x] 接続成功/失敗の表示

## 料金設定カスタマイズ
- [x] 課金単位設定（10分〜60分プルダウン）
- [x] 料金自由入力
- [x] 料金計算ロジックの動的対応

## マルチテナント対応（オーナー会員機能）
- [x] データベーススキーマ拡張（駐車場テーブル、オーナー紐付け）
- [x] ユーザーロール拡張（user/owner/admin）
- [x] オーナー会員登録機能
- [x] オーナー向けマイページ（自分の駐車場管理）
- [x] オーナー別の決済設定・料金設定
- [x] 駐車場作成・編集機能

## 運営者向け管理機能
- [x] 全オーナー一覧表示
- [x] オーナーアカウント有効化・無効化
- [x] オーナー詳細情報表示
- [x] 全体の利用状況・売上確認
- [x] オーナー承認フロー

## 権限制御
- [x] ロールベースのアクセス制御
- [x] オーナーは自分の駐車場のみアクセス可能
- [x] 運営者は全データにアクセス可能


## 運営管理画面の分離
- [x] ホームページから運営管理リンクを削除
- [x] オーナーページから運営管理へのリンクを非表示に
- [x] 運営管理画面は専用URL（/operator）でのみアクセス可能に


## ホームページ簡素化
- [x] LP説明文・特徴セクション等を削除
- [x] シンプルなログイン画面に変更
- [x] ログイン後オーナーダッシュボードへ遷移


## デモ版作成
- [x] 決済をデモモードに固定（実決済サービス接続なしでも動作）
